{
  "messages": [
    {
      "role": "system",
      "content": "You are an AI assistant tasked with refining D&D 5e data to fit a specific JSON schema. Return only the corrected JSON object with no additional text."
    },
    {
      "role": "user",
      "content": "Refine the following character data to conform to the provided JSON schema. Schema:\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"title\": \"D&D 5e Game State Schema\",\n  \"description\": \"A schema defining the structure for D&D 5e game state data, including players, NPCs, inventory, spells, and conditions. Updated to ensure validation refresh.\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"players\": {\n      \"type\": \"array\",\n      \"items\": {\n        \"type\": \"object\",\n        \"required\": [\n          \"name\",\n          \"hp\",\n          \"ac\",\n          \"strength\",\n          \"dexterity\",\n          \"constitution\",\n          \"intelligence\",\n          \"wisdom\",\n          \"charisma\",\n          \"class_type\"\n        ],\n        \"properties\": {\n          \"name\": {\n            \"type\": \"string\"\n          },\n          \"description\": {\n            \"type\": \"string\",\n            \"maxLength\": 500\n          },\n          \"hp\": {\n            \"type\": \"integer\"\n          },\n          \"ac\": {\n            \"type\": \"integer\"\n          },\n          \"strength\": {\n            \"type\": \"integer\"\n          },\n          \"dexterity\": {\n            \"type\": \"integer\"\n          },\n          \"constitution\": {\n            \"type\": \"integer\"\n          },\n          \"intelligence\": {\n            \"type\": \"integer\"\n          },\n          \"wisdom\": {\n            \"type\": \"integer\"\n          },\n          \"charisma\": {\n            \"type\": \"integer\"\n          },\n          \"class_type\": {\n            \"type\": \"string\",\n            \"enum\": [\n              \"wizard\",\n              \"sorcerer\",\n              \"fighter\",\n              \"rogue\",\n              \"cleric\",\n              \"barbarian\",\n              \"paladin\",\n              \"ranger\",\n              \"druid\",\n              \"monk\",\n              \"warlock\",\n              \"bard\"\n            ]\n          },\n          \"damage\": {\n            \"type\": \"string\",\n            \"pattern\": \"^\\\\d+d\\\\d+(\\\\s*\\\\+\\\\s*\\\\d+)?$\"\n          },\n          \"inventory\": {\n            \"type\": \"array\",\n            \"items\": {\n              \"type\": \"object\",\n              \"required\": [\n                \"name\",\n                \"type\"\n              ],\n              \"properties\": {\n                \"name\": {\n                  \"type\": \"string\"\n                },\n                \"description\": {\n                  \"type\": \"string\",\n                  \"maxLength\": 500\n                },\n                \"type\": {\n                  \"type\": \"string\",\n                  \"enum\": [\n                    \"melee\",\n                    \"ranged\",\n                    \"magic\",\n                    \"armor\",\n                    \"potion\",\n                    \"scroll\",\n                    \"misc\"\n                  ]\n                },\n                \"damage\": {\n                  \"type\": \"string\",\n                  \"pattern\": \"^\\\\d+d\\\\d+(\\\\s*\\\\+\\\\s*\\\\d+)?$\"\n                },\n                \"finesse\": {\n                  \"type\": \"boolean\"\n                },\n                \"versatile\": {\n                  \"type\": [\n                    \"object\",\n                    \"boolean\"\n                  ],\n                  \"properties\": {\n                    \"one_hand\": {\n                      \"type\": [\n                        \"string\",\n                        \"null\"\n                      ],\n                      \"pattern\": \"^\\\\d+d\\\\d+(\\\\s*\\\\+\\\\s*\\\\d+)?$\"\n                    },\n                    \"two_hands\": {\n                      \"type\": [\n                        \"string\",\n                        \"null\"\n                      ],\n                      \"pattern\": \"^\\\\d+d\\\\d+(\\\\s*\\\\+\\\\s*\\\\d+)?$\"\n                    }\n                  }\n                },\n                \"mod\": {\n                  \"type\": \"string\",\n                  \"enum\": [\n                    \"strength\",\n                    \"dexterity\",\n                    \"intelligence\",\n                    \"wisdom\",\n                    \"charisma\",\n                    \"constitution\"\n                  ]\n                }\n              }\n            }\n          },\n          \"spells\": {\n            \"type\": \"array\",\n            \"items\": {\n              \"type\": \"object\",\n              \"required\": [\n                \"name\",\n                \"type\",\n                \"targeting\"\n              ],\n              \"properties\": {\n                \"name\": {\n                  \"type\": \"string\"\n                },\n                \"description\": {\n                  \"type\": \"string\",\n                  \"maxLength\": 500\n                },\n                \"type\": {\n                  \"type\": \"string\",\n                  \"enum\": [\n                    \"damage\",\n                    \"healing\",\n                    \"buff\",\n                    \"debuff\",\n                    \"utility\"\n                  ]\n                },\n                \"damage\": {\n                  \"type\": \"string\",\n                  \"pattern\": \"^\\\\d+d\\\\d+(\\\\s*\\\\+\\\\s*\\\\d+)?$\"\n                },\n                \"healing\": {\n                  \"type\": \"string\",\n                  \"pattern\": \"^\\\\d+d\\\\d+(\\\\s*\\\\+\\\\s*\\\\d+)?$\"\n                },\n                \"effect\": {\n                  \"type\": \"object\",\n                  \"required\": [\n                    \"attribute\",\n                    \"modifier\",\n                    \"duration\"\n                  ],\n                  \"properties\": {\n                    \"attribute\": {\n                      \"type\": \"string\",\n                      \"enum\": [\n                        \"ac\",\n                        \"health\",\n                        \"visibility\",\n                        \"speed\",\n                        \"strength\",\n                        \"dexterity\",\n                        \"constitution\",\n                        \"intelligence\",\n                        \"wisdom\",\n                        \"charisma\",\n                        \"adv_disadv\",\n                        \"none\"\n                      ]\n                    },\n                    \"modifier\": {\n                      \"type\": [\n                        \"integer\",\n                        \"string\"\n                      ],\n                      \"description\": \"Temporary simplification to allow any string or integer due to jsonschema validation issues with conditional logic. Constraints for adv_disadv and none to be revisited.\"\n                    },\n                    \"duration\": {\n                      \"type\": \"integer\",\n                      \"minimum\": 0\n                    }\n                  }\n                },\n                \"save\": {\n                  \"type\": [\n                    \"string\",\n                    \"null\"\n                  ],\n                  \"enum\": [\n                    \"strength\",\n                    \"dexterity\",\n                    \"constitution\",\n                    \"intelligence\",\n                    \"wisdom\",\n                    \"charisma\",\n                    \"\",\n                    null\n                  ]\n                },\n                \"dc\": {\n                  \"type\": [\n                    \"integer\",\n                    \"null\"\n                  ],\n                  \"minimum\": 0\n                },\n                \"targeting\": {\n                  \"type\": \"string\",\n                  \"enum\": [\n                    \"single\",\n                    \"aoe\",\n                    \"self\"\n                  ]\n                }\n              }\n            }\n          },\n          \"conditions\": {\n            \"type\": \"object\",\n            \"additionalProperties\": {\n              \"type\": \"integer\",\n              \"minimum\": 0\n            }\n          }\n        }\n      }\n    },\n    \"npcs\": {\n      \"type\": \"array\",\n      \"items\": {\n        \"type\": \"object\",\n        \"required\": [\n          \"name\",\n          \"hp\",\n          \"ac\",\n          \"strength\",\n          \"dexterity\",\n          \"constitution\",\n          \"intelligence\",\n          \"wisdom\",\n          \"charisma\",\n          \"class_type\"\n        ],\n        \"properties\": {\n          \"name\": {\n            \"type\": \"string\"\n          },\n          \"description\": {\n            \"type\": \"string\",\n            \"maxLength\": 500\n          },\n          \"hp\": {\n            \"type\": \"integer\"\n          },\n          \"ac\": {\n            \"type\": \"integer\"\n          },\n          \"strength\": {\n            \"type\": \"integer\"\n          },\n          \"dexterity\": {\n            \"type\": \"integer\"\n          },\n          \"constitution\": {\n            \"type\": \"integer\"\n          },\n          \"intelligence\": {\n            \"type\": \"integer\"\n          },\n          \"wisdom\": {\n            \"type\": \"integer\"\n          },\n          \"charisma\": {\n            \"type\": \"integer\"\n          },\n          \"class_type\": {\n            \"type\": \"string\",\n            \"enum\": [\n              \"wizard\",\n              \"fighter\",\n              \"sorcerer\",\n              \"rogue\",\n              \"cleric\",\n              \"barbarian\",\n              \"paladin\",\n              \"ranger\",\n              \"druid\",\n              \"monk\",\n              \"warlock\",\n              \"bard\",\n              \"monster\",\n              \"beast\"\n            ]\n          },\n          \"damage\": {\n            \"type\": \"string\",\n            \"pattern\": \"^\\\\d+d\\\\d+(\\\\s*\\\\+\\\\s*\\\\d+)?$\"\n          },\n          \"inventory\": {\n            \"type\": \"array\",\n            \"items\": {\n              \"type\": \"object\",\n              \"required\": [\n                \"name\",\n                \"type\"\n              ],\n              \"properties\": {\n                \"name\": {\n                  \"type\": \"string\"\n                },\n                \"description\": {\n                  \"type\": \"string\",\n                  \"maxLength\": 500\n                },\n                \"type\": {\n                  \"type\": \"string\",\n                  \"enum\": [\n                    \"melee\",\n                    \"ranged\",\n                    \"magic\",\n                    \"armor\",\n                    \"potion\",\n                    \"scroll\",\n                    \"misc\"\n                  ]\n                },\n                \"damage\": {\n                  \"type\": \"string\",\n                  \"pattern\": \"^\\\\d+d\\\\d+(\\\\s*\\\\+\\\\s*\\\\d+)?$\"\n                },\n                \"finesse\": {\n                  \"type\": \"boolean\"\n                },\n                \"mod\": {\n                  \"type\": \"string\",\n                  \"enum\": [\n                    \"strength\",\n                    \"dexterity\",\n                    \"intelligence\",\n                    \"wisdom\",\n                    \"charisma\",\n                    \"constitution\"\n                  ]\n                }\n              }\n            }\n          },\n          \"spells\": {\n            \"type\": \"array\",\n            \"items\": {\n              \"type\": \"object\",\n              \"required\": [\n                \"name\",\n                \"type\",\n                \"targeting\"\n              ],\n              \"properties\": {\n                \"name\": {\n                  \"type\": \"string\"\n                },\n                \"description\": {\n                  \"type\": \"string\",\n                  \"maxLength\": 500\n                },\n                \"type\": {\n                  \"type\": \"string\",\n                  \"enum\": [\n                    \"damage\",\n                    \"healing\",\n                    \"buff\",\n                    \"debuff\",\n                    \"utility\"\n                  ]\n                },\n                \"damage\": {\n                  \"type\": \"string\",\n                  \"pattern\": \"^\\\\d+d\\\\d+(\\\\s*\\\\+\\\\s*\\\\d+)?$\"\n                },\n                \"healing\": {\n                  \"type\": \"string\",\n                  \"pattern\": \"^\\\\d+d\\\\d+(\\\\s*\\\\+\\\\s*\\\\d+)?$\"\n                },\n                \"effect\": {\n                  \"type\": \"object\",\n                  \"required\": [\n                    \"attribute\",\n                    \"modifier\",\n                    \"duration\"\n                  ],\n                  \"properties\": {\n                    \"attribute\": {\n                      \"type\": \"string\",\n                      \"enum\": [\n                        \"ac\",\n                        \"health\",\n                        \"visibility\",\n                        \"speed\",\n                        \"strength\",\n                        \"dexterity\",\n                        \"constitution\",\n                        \"intelligence\",\n                        \"wisdom\",\n                        \"charisma\",\n                        \"adv_disadv\",\n                        \"none\"\n                      ]\n                    },\n                    \"modifier\": {\n                      \"type\": [\n                        \"integer\",\n                        \"string\"\n                      ],\n                      \"description\": \"Temporary simplification to allow any string or integer due to jsonschema validation issues with conditional logic. Constraints for adv_disadv and none to be revisited.\"\n                    },\n                    \"duration\": {\n                      \"type\": \"integer\",\n                      \"minimum\": 0\n                    }\n                  }\n                },\n                \"save\": {\n                  \"type\": [\n                    \"string\",\n                    \"null\"\n                  ],\n                  \"enum\": [\n                    \"strength\",\n                    \"dexterity\",\n                    \"constitution\",\n                    \"intelligence\",\n                    \"wisdom\",\n                    \"charisma\",\n                    \"\",\n                    null\n                  ]\n                },\n                \"dc\": {\n                  \"type\": [\n                    \"integer\",\n                    \"null\"\n                  ],\n                  \"minimum\": 0\n                },\n                \"targeting\": {\n                  \"type\": \"string\",\n                  \"enum\": [\n                    \"single\",\n                    \"aoe\",\n                    \"self\"\n                  ]\n                }\n              }\n            }\n          },\n          \"conditions\": {\n            \"type\": \"object\",\n            \"additionalProperties\": {\n              \"type\": \"integer\",\n              \"minimum\": 0\n            }\n          }\n        }\n      }\n    }\n  },\n  \"required\": [\n    \"players\",\n    \"npcs\"\n  ]\n}\n\nNon-conforming data:\n{\n  \"name\": \"King-Rabbit\",\n  \"description\": \"\",\n  \"hp\": 15,\n  \"ac\": 18,\n  \"strength\": 8,\n  \"dexterity\": 20,\n  \"constitution\": 12,\n  \"intelligence\": 10,\n  \"wisdom\": 16,\n  \"charisma\": 14,\n  \"class_type\": \"sorcerer\",\n  \"damage\": \"1d6\",\n  \"inventory\": [\n    {\n      \"name\": \"Long Carrot Magic Wand\",\n      \"type\": \"magic\",\n      \"damage\": \"1d8\",\n      \"finesse\": true,\n      \"mod\": \"dexterity\",\n      \"versatile\": {\n        \"one_hand\": \"1d6\",\n        \"two_hands\": \"1d8\"\n      }\n    },\n    {\n      \"name\": \"Orange Dress Bow\",\n      \"type\": \"misc\",\n      \"damage\": \"\",\n      \"finesse\": false,\n      \"mod\": \"dexterity\"\n    }\n  ],\n  \"spells\": [\n    {\n      \"name\": \"Psychic Blast\",\n      \"type\": \"damage\",\n      \"damage\": \"2d6+3\",\n      \"effect\": {\n        \"attribute\": \"health\",\n        \"modifier\": -5,\n        \"duration\": 1\n      },\n      \"save\": \"intelligence\",\n      \"dc\": 15,\n      \"targeting\": \"single\"\n    },\n    {\n      \"name\": \"Mind Shield\",\n      \"type\": \"buff\",\n      \"effect\": {\n        \"attribute\": \"ac\",\n        \"modifier\": 2,\n        \"duration\": 3\n      },\n      \"save\": null,\n      \"dc\": null,\n      \"targeting\": \"self\"\n    },\n    {\n      \"name\": \"Telekinetic Thrust\",\n      \"type\": \"utility\",\n      \"damage\": \"1d8+2\",\n      \"effect\": {\n        \"attribute\": \"speed\",\n        \"modifier\": 10,\n        \"duration\": 1\n      },\n      \"save\": \"strength\",\n      \"dc\": 13,\n      \"targeting\": \"single\"\n    }\n  ],\n  \"conditions\": {\n    \"none\": 0\n  }\n}\n\nFill in missing fields with appropriate D&D 5e values, remove invalid fields, and adjust existing fields to match the schema. Return ONLY the corrected JSON object with no additional text or formatting."
    }
  ],
  "model": "llama-3.3-70b",
  "temperature": 0.5,
  "venice_parameters": {
    "enable_web_search": "auto"
  },
  "parallel_tool_calls": true
}